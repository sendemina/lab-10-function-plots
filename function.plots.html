<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>10 to -10</title>
  </head>
  <body>
    <h1 style="font-family:Sans-Serif;">For Loops, Number Generation, + Function Plots</h1>
    <canvas id="myCanvas" width="750px" height="200px" style="border: 1px solid gray;"></canvas>
    <script>
      var sales = [0, 50, 74, 31, 47, 25, 67, 78, 45, 15, 85, 43, 100];
      graph(sales);

      function graph(list)
      {
          // we want our function to...
          // 1. scale all of our array values between the x- and y-dimensions of our <canvas> element
          // 2. graph the curve between array values onto our <canvas>, no matter...
            // (a) what its dimensions are (responsive!),
            // (b) how many array values we have,
            // (c) how high or low the array values are
          // 3. print the valeus of the array to the webpage underneath the graph
        // 0. SETUP STUFF | connect our function to the <canvas> above & calculate some initial values
        var canvas = document.getElementById("myCanvas"); // identify the function plot area
        var theContext = canvas.getContext("2d"); // get the "context" (i.e. properties of the <canvas> element)
        var width = canvas.width;
        var height = canvas.height;
        var inputMin = Math.min(...list); // calculate the lowest value in the input list (... is SPREAD SYNTAX)
        var inputMax = Math.max(...list); // calculate the highest value in the input list
        // 1. SCALE | convert input values into <canvas> values
        var scale = (num, in_min, in_max, out_min, out_max) =>
        {
          // create a scalar function using an ARROW FUNCTION
          return (num - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
        }
        // map input list onto new range of <canvas> values, collect in a new list called myList
        var myList = list.map(n => scale(n, inputMin, inputMax, 0, height));
        var myListLength = myList.length; // how many values are in the list?
        // calculate the distance between each point on the x-axis; divide width into equal parts
        var offset = (1 / (myListLength - 1)) * width;
        // 2. GRAPH | draw lines between values inside the <canvas> area
        theContext.fillStyle = "#AAF5C6"; // a shade of green
        theContext.fillRect(0, 0, width, height); // fill the canvas with color value above
        theContext.strokeRect(0, 0, width, height); // draw the bounding box
        theContext.moveTo(0, myList[0]); // move "drawing pen" to the 1st point to be drawn
        theContext.beginPath(); // begin drawing! use for loop below to draw a line between each value in myList
        for (let x = 0; x < myListLength; x++)
        {
          theContext.lineTo(x * offset, height - myList[x]); // myList[x] means each element of the array at index x
        }
        theContext.stroke();
        // 3. PRINT | Write array values from original list onto the webpage
        document.write("<br><h3 style=\"font-family:Sans-Serif;\">array of Y-values generated by the for loop:</h3>");
        list = list.map(a => a.toFixed(2)); // round all values in the array to the nearest 0.00
        // print array values to the web page
        document.write("<div><p style=\"font-family:Sans-Serif;width:" + width + "px;height:200px;word-wrap:break-word;overflow:auto;\">" + list + "</p></div>")
      }
    </script>
  </body>
</html>
